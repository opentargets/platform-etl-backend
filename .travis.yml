dist: xenial
language: scala
  - 2.12.12
jdk:
  - openjdk8
script:
  - sbt ++$TRAVIS_SCALA_VERSION clean compile
  - sbt ++$TRAVIS_SCALA_VERSION coverage test coverageReport
  - sbt ++$TRAVIS_SCALA_VERSION assembly
before_deploy:
  # Set up git user name and tag this commit
  - git config --local user.name "opentargets-admin"
  - git config --local user.email "administrator@opentargets.org"
deploy:
  provider: releases
  api_key:
    secure: nyVS+DePVw0YoOyhbK5SaQyC69T1rj3ruiXIQRjePlrEJmyh8yLMQu7uzz5ugBxiBnjdZqjnyQe22Zv9QX/CixxseLrv4m2w7wjjF8mCjjY+O46mMO9qKIcu16H79src+NoKPLW/oU0JCLR4ZTmEwWsDN73L0mmlvec+dQgu6gCPI3Ysx2YGqkl9u0dCv+JBkNG7Di0V6xII74vbfDSLm1wwHeRqItHROcfJr4mez8jlCXYdkMzpBh+25Uh94dCFi03OX4tHDRSnOy5BjWoBqb74TsqhpmdO5y44TW1V9x46H/oHeUf365N6bDyErbRJ9hF9f0HAywduy4DhIa+r33YgVaEMZj7iINC2/aOzkF5JFjFo2W03tJdOyNi2rE7nXwrvzdH5K6xpvpeH2fpB0CBP0cuiRWgUblhzfM7F2RGeW6Ww219vzyovVX+m8LuwPzh46uxG/mz30bjZl+910PTPmkyJk8kVg2535788oLKWegP8koY8P6987Fc94NgxDDxdlqFPEFL8Ba4h8MSzgfQfdpB1LTJAcNfD8La46q5ZVNvy7EpzDxzVTm9s2QXEoRLrQSZU2ShGBp6e5q8zBDnqOsqJ1GgI2OVcj7/Gx2yYhckXTd9bMB76hNvjxmrf0NfnG9jNgxRV6i1ii8eP3Gr+Bpuy7VAlVbuZM4ojXlM=
    file_glob: true
  file:
    - "target/scala-2.12/io-opentargets-etl-backend-assembly-*"
  on:
    repo: opentargets/platform-etl-backend
    tags: true
    all_branches: false
  skip_cleanup: true
#after_success:
#  - bash <(curl -s https://codecov.io/bash)
