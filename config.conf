spark-uri = null
common {
  default-steps = [
    "disease",
    "target",
    "reactome",
    "eco",
    "interactions",
    "cancerBiomarkers",
    "expression",
    "mousePhenotypes",
    "evidence",
    "association",
    "drug",
    "knownDrugs",
    "search",
	  "associationOTF"
  ]
  output-format = "json"
  output = "gs://ot-snapshots/etl/outputs/20.11"
  output = ${?OT_ETL_OUTPUT}
  inputs {
    disease {
      format = "parquet"
      path = "gs://ot-snapshots/parquet/20.11/efo-data"
    }
    target {
       format = "parquet"
       path = "gs://ot-snapshots/parquet/20.11/gene-data"
    }
    tep {
      format = "json"
      path = "gs://ot-snapshots/etl/inputs/20.11/jsonl/tep-2020-11-10.json"
    }
    eco {
      format = "parquet"
      path = "gs://ot-snapshots/parquet/20.11/eco-data"
    }
    mousephenotypes {
      format = "json"
      path = "gs://ot-snapshots/etl/inputs/20.11/jsonl/mousephenotype.json"
    }
    expression {
      format = "parquet"
      path = "gs://ot-snapshots/parquet/20.11/expression-data"
    }
    reactome {
      format = "parquet"
      path = "gs://ot-snapshots/parquet/20.11/reactome-data"
    }
    interactions {
      rnacentral {
        format = "json"
        path = "gs://ot-snapshots/etl/inputs/20.11/jsonl/interactions/rna-central"
      }
      humanmapping {
        format = "json"
        path = "gs://ot-snapshots/etl/inputs/20.11/jsonl/interactions/human-mapping"
      }
      ensproteins {
        format = "json"
        path = "gs://ot-snapshots/etl/inputs/20.11/jsonl/interactions/ensembl-protein-2020-11-26.json.gz"
      }
      intact {
        format = "json"
        path = "gs://ot-snapshots/etl/inputs/20.11/jsonl/interactions/intact-interactors-2020-11-26.json"
      }
      strings = {
        format = "json"
        path = "gs://ot-snapshots/etl/inputs/20.11/jsonl/interactions/string-interactions-2020-11-26.json.gz"
      }
    }
  }
}

evidences {
  outputs {
    succeeded {
      format = ${common.output-format}
      path = ${common.output}"/evidences/succeeded"
      partition-by = ["sourceId"]
    }
    failed {
      format = ${common.output-format}
      path = ${common.output}"/evidences/failed"
      partition-by = ["sourceId"]
    }
    stats {
      format = ${common.output-format}
      path = ${common.output}"/evidences/stats"
    }
  }

  inputs {
    raw-evidences {
      format = "json"
      path = "gs://open-targets-data-releases/20.11/input/evidence-files"
    }
    diseases {
      format = ${common.output-format}
      path = ${common.output}"/diseases"
    }
    targets {
      format = ${common.output-format}
      path = ${common.output}"/targets"
    }
  }
}

drug {
  chembl-molecule {
    format = "json"
    path = "gs://ot-snapshots/jsonl/chembl/chembl_27_molecule-2020-10-08.jsonl"
  }
  chembl-indication {
    format = "json"
    path = "gs://ot-snapshots/jsonl/chembl/chembl_27_drug_indication-2020-10-08.jsonl"
  }
  chembl-mechanism {
    format = "json"
    path = "gs://ot-snapshots/jsonl/chembl/chembl_27_mechanism-2021-01-22.jsonl"
  }
  chembl-target {
    format = "json"
    path = "gs://ot-snapshots/jsonl/chembl/chembl_27_target-2020-10-08.jsonl"
  }
  disease-pipeline {
    format = ${common.output-format}
    path = ${common.output}"/diseases"
  }
  target-pipeline {
    format = ${common.output-format}
    path = ${common.output}"/targets"
  }
  evidence-pipeline = ${evidences.outputs.succeeded}
  drugbank-to-chembl {
    format = "csv"
    path = "gs://ot-team/jarrod/drugbank/db.csv.gz"
    options = [
      {k: "sep", v: "\\t"},
      {k: "header", v: "true"}
    ]
  }
  drug-extensions = []

  outputs = {
    drug {
      format = ${common.output-format}
      path = ${common.output}"/drugs/drug"
    }
    mechanism-of-action {
      format = ${common.output-format}
      path = ${common.output}"/drugs/mechanism_of_action"
    }
    indications {
      format = ${common.output-format}
      path = ${common.output}"/drugs/indication"
    }
  }
}
